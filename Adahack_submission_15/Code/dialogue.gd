extends Control
@onready var dialogue_name = %Name
@onready var text = $DialogueBox/Text

@onready var button = $DialogueBox/HBoxContainer/Button
@onready var button_2 = $DialogueBox/HBoxContainer/Button2
@onready var button_3 = $DialogueBox/HBoxContainer/Button3
#
#var names = ['Skater Boy John', 'Skater Boy Khyle', 'Skater Boy Max', 'Skater Boy Conan', 'Skater Boy Joseph', 'Skater Boy Dylan', 'Skater Boy Andrew', 'Skater Boy Joseph', 'Skater Boy Mark', 'Skater Boy Lewis', 'Skater Boy Johann', 'Skater Boy Michael', 'Skater Boy Frederike', 'Skater Boy Thomas', 'Skater Boy Stefan']
#var questions = ['Hola, ¿cómo estás?', '¿De dónde eres?', '¿Qué te gusta hacer en tu tiempo libre?', '¿Has viajado a otros países?', '¿Cuál es tu lugar favorito al que has viajado?', "Yo, dudes! What's your favorite skate trick?", 'Hey, are you guys into music?', 'You guys look different. Where are you from?', "What's your go-to skate park, dudes?", 'You guys like skating in the rain?', 'Hey, Leute! Was geht ab?', 'Hey, mögt ihr Musik?', 'Ihr seht anders aus. Woher kommt ihr?', 'Welcher Skatepark ist euer Favorit, Leute?', 'Skatet ihr gerne im Regen?']
#var best_options=['Muy bien, gracias. ¿Y tú? Es un placer conocerte.', 'Soy de Madrid, España. ¿Y tú, de dónde eres?', 'Me gusta leer libros, hacer deporte y pasar tiempo con amigos. ¿Y a ti, qué te gusta hacer?', 'Sí, he tenido la oportunidad de visitar varios países, como Francia, Italia y Japón. ¿Y tú, has viajado fuera de tu país?', 'Mi lugar favorito es Japón por su cultura fascinante y su hermosa naturaleza. ¿Y tú, cuál es tu destino favorito?', 'Our favorite skate trick is the kickflip!', "We're big music fans, man!", "We're from the suburbs, born and raised!", 'We usually hit up the skate park downtown.', 'Skating in the rain is super fun!', 'Wir sind Menschen und chillen hier.', 'Wir lieben Musik, Mann!', 'Wir sind aus den Vororten, geboren und aufgewachsen!', 'Wir fahren meistens in den Skatepark in der Innenstadt.', 'Im Regen skaten macht mega Spaß!']
#var mid_options=['bien, gracias. y tú? gusto en verte.', 'Soy de Madrid, España. ¿Y tu de donde eres?', 'Me gustan leer libro, hacer deporte y tiempo con amigos. Y tú, ¿qué te gusta?', 'Sí, yo he visitar países como Francia y Italia, Japón. ¿Y tú, has viajar fuera tu país?', 'Mi favorito es Japón por cultura fascinante y naturaleza hermosa. Y tú, cuál destino te gusta más?', 'We like kickflip skate trick.', 'Us love music, yeah.', 'Us from suburb, yeah.', 'We skate park downtown, too.', 'Rain skating fun, dude.', 'Äh, nicht viel. Du?', 'Wir mögen Musik, ja.', 'Wir aus den Vororten, auch.', 'Wir Skatepark in der Innenstadt auch.', 'Regen skaten ist lustig, Mann.']
#var worst_options=['bien, ¿y tú? gusto ver.', 'Yo ser de Madrid, España. Y tú de donde?', 'Me gustar leer libro, hacer deportes y pasar tiempo con amigo. ¿Y ti qué gusta hacer?', 'Sí, yo visitado países Francia, Italia, Japón. ¿Tú viajado otros países?', 'Mi favorito Japón por cultura y naturaleza. ¿Y tú, qué lugar más te gusta?', 'Kickflip, cookies!', 'Music, cookies!', 'Suburb, cookies!', 'Skate park, cookies!', 'Rain skate, cookies!', 'Cookies?', 'Musik, Kekse!', 'Vorort, Kekse!', 'Skatepark, Kekse!', 'Regen skate, Kekse!']
#var best_responses=[':) This response is grammatically correct and polite. It uses complete sentences and correct conjugations ("estoy" for "I am"). It also properly uses punctuation and includes a question ("¿Y tú?") to reciprocate the initial greeting, followed by a polite phrase ("Es un placer conocerte"), which translates to "It\'s a pleasure to meet you." This level of response is formal and shows attention to grammatical norms and social courtesy.', ':) This response is grammatically correct and complete. It provides detailed information ("Soy de Madrid, España") using the correct verb conjugation for "I am" ("soy") and specifies the city and country. The response includes a reciprocal question ("¿Y tú, de dónde eres?"), inviting the other person to share their origin. This level of response is formal, clear, and shows attention to grammatical norms and conversational etiquette.', ':) This response is grammatically correct. It uses reflexive verbs ("me gusta") appropriately, lists activities with the correct verb forms, and ends with a reciprocal question that is structured correctly. The use of commas to separate the list of activities and the inclusion of the conjunction "y" before the last item are in line with proper grammar rules in Spanish.', ':) This response is grammatically correct, using the present perfect tense appropriately ("he tenido la oportunidad") to indicate experiences. It also correctly lists countries with proper punctuation and uses the conjunction "y" before the last item. The follow-up question is structured correctly, inviting the other person to share their experiences with travel outside their country.', ':) This response is grammatically correct, using appropriate adjectives and prepositions to describe the reason for the preference. It includes a correct structure for expressing opinions ("Mi lugar favorito es...") and asks a reciprocal question with proper syntax.', 'Awesome! Can you show me?', "Cool, what's your favorite band?", "Nice, what's your favorite spot there?", "No way, let's shred together!", "Right on, it's a blast!", 'Cool, habt ihr Bock zu skaten?', 'Cool, was ist eure Lieblingsband?', 'Nice, was ist eure Lieblingsecke da?', 'Krass, lasst uns zusammen skaten!', 'Stimmt, es ist der Hammer!']
#var mid_responses=[':| This response is mostly correct. In Spanish, we use an inverted \'¿\' at the beginning of a question. The lack of capitalization and the more casual phrase "gusto en verte" (pleasure in seeing you) instead of the more formal "Es un placer conocerte" (It\'s a pleasure to meet you) make it moderately correct.', ':| This response introduces minor grammatical errors by omitting the accent marks on "tú" and "dónde." In Spanish, accent marks are crucial for distinguishing between possessive adjectives, pronouns, and differentiating interrogative words from their relative or conjunctive counterparts. Omitting these can lead to a less formal tone and slight ambiguity, though the sentence remains largely understandable.', ':| This response introduces moderate grammatical errors that are more noticeable than minor punctuation issues. Firstly, the use of "gustan" with an infinitive verb ("leer") is incorrect because "gustar" should agree with the direct object of the sentence, which in this case is the singular activity of reading ("Me gusta leer"). Secondly, omitting "pasar" before "tiempo" disrupts the verb phrase, leaving the activity without a verb, which is a clear grammatical mistake. Lastly, dropping "a ti" in the follow-up question makes it less formal and slightly awkward, although it\'s still understandable.', ':| This response introduces more pronounced grammatical errors. Using "he visitar" instead of the correct "he visitado" shows a clear mistake in conjugating the verb in the present perfect tense, indicating a lack of understanding of how to use auxiliary verbs with past participles. Additionally, the awkward placement of the conjunction "y" before listing all the countries without a comma to separate them properly disrupts the list format. In the follow-up question, "has viajar" instead of "has viajado" repeats the mistake of misusing the infinitive form instead of the past participle. Omitting "de" before "tu país" also contributes to the errors, making the prepositional phrase incomplete.', ':| This response introduces errors by omitting articles ("la" before "cultura" and "la" before "naturaleza") and prepositions ("por su" should be used instead of "por") that are necessary for grammatical  correctness in Spanish. The question at the end is slightly informal due to the omission of "es tu" ("cuál es tu destino favorito?"), making it less grammatically correct but still understandable. These errors, while affecting the fluency and formality of the response, do not impede understanding.', 'Eh, not bad.', 'Okay, cool.', 'Alright, cool.', 'Sure thing.', 'Hmm, not bad.', 'Okay, später vielleicht.', 'Okay, cool.', 'Alles klar, cool.', 'Klar, gerne.', 'Hmm, nicht schlecht.']
#var worst_responses=[':( This response shows a lower level of grammatical correctness primarily due to its brevity and omission of words, leading to a fragment ("gusto ver") that lacks a complete structure. While "bien, ¿y tú?" is still a correct and understandable way to say "good, and you?", the phrase "gusto ver" is an incomplete thought that translates directly to "pleasure see," missing the preposition and pronoun that would make it correct ("gusto de verte" or "gusto en verte"). This response is characteristic of very casual or colloquial speech, possibly in a text message or among close friends, and may not adhere to standard grammatical rules.\n', ':( This response contains significant grammatical errors. The use of "Yo ser" instead of "Soy" is incorrect because "ser" is an infinitive verb that needs to be conjugated to match the subject in Spanish sentences. Additionally, the omission of "eres" in the follow-up question ("Y tú de donde?") makes the question incomplete. Lastly, the absence of the accent in "dónde" and the punctuation mark "?" at the end of the question further contribute to the grammatical inaccuracies. This response demonstrates a misunderstanding of verb conjugation and sentence structure, which are essential for grammatical correctness in Spanish.\n', ':( This response has significant grammatical errors. Incorrectly using "gustar" instead of "gusta" shows a fundamental misunderstanding of verb conjugation. The singular use of "libro" and "amigo" when it should be plural to match the context of reading multiple books and spending time with multiple friends is incorrect. Omitting "a" before "ti" in the question and misusing "gusta" without a subject pronoun ("qué gusta hacer") are significant errors that make the sentence grammatically incorrect and awkward.\n', ':( This response contains significant grammatical errors, the omission of the auxiliary verb "he" before "visitado" disregards the proper formation of the present perfect tense in Spanish. The absence of "a" before the list of countries and the incorrect structure of the question ("¿Tú viajado otros países?") without auxiliary verbs or prepositions significantly affects the sentence\'s grammatical correctness. These mistakes demonstrate a  fundamental misunderstanding of verb tenses and sentence structuring in Spanish, affecting clarity and correctness.\n', ':( This response contains significant grammatical errors by omitting the verb "es" ("Mi favorito es Japón") and not using prepositions or articles where needed, leading to a choppy and incomplete sentence structure. The question is rephrased awkwardly, lacking clarity and grammatical structure ("¿Y tú, cuál es tu lugar favorito?"), and it uses an incorrect order of words that doesn\'t fit standard question formatting in Spanish. These errors indicate a misunderstanding of basic sentence structure and the importance of verb inclusion for clarity.\n', 'What? Nevermind.\n', 'Huh? What?\n', 'What? Nevermind.\n', 'Eh? Whatever.\n', 'What? Nevermind.\n', 'Hä? Egal.\n', 'Hä? Was?\n', 'Was? Egal.\n', 'Eh? Egal.\n', 'Was? Egal.']

#var names = ['Skater Boy John', 'Skater Boy Khyle', 'Skater Boy Max', 'Skater Boy Conan', 'Skater Boy Joseph', 'Skater Boy Shaun', 'Skater Boy Dylan', 'Skater Boy Max', 'Skater Boy Álvaro']
#var questions = ['Hola, ¿cómo estás?', '¿De dónde eres?', '¿Qué te gusta hacer en tu tiempo libre?', '¿Has viajado a otros países?', '¿Cuál es tu lugar favorito al que has viajado?', '¿Cuánto tiempo llevas patinando?', '¿Qué truco estás intentando aprender?', '¿Quién es tu skater favorito?', '¿Has participado en alguna competencia de skate?']
#var best_options = ['Muy bien, gracias. ¿Y tú? Es un placer conocerte.', 'Soy de Madrid, España. ¿Y tú, de dónde eres?', 'Me gusta leer libros, hacer deporte y pasar tiempo con amigos. ¿Y a ti, qué te gusta hacer?', 'Sí, he tenido la oportunidad de visitar varios países, como Francia, Italia y Japón. ¿Y tú, has viajado fuera de tu país?', 'Mi lugar favorito es Japón por su cultura fascinante y su hermosa naturaleza. ¿Y tú, cuál es tu destino favorito?', 'Llevo patinando desde hace cinco años. Empecé cuando era más joven y me ha apasionado desde entonces. ¿Y tú, hace cuánto que patinas?', 'Actualmente, estoy trabajando en aprender el kickflip. Es un truco que requiere mucha práctica y precisión. ¿Y tú, qué truco estás intentando dominar?', 'Mi skater favorito es Nyjah Huston por su increíble técnica y estilo. Siempre me inspira a mejorar. ¿Y tú, tienes algún skater que admires?', 'Sí, he participado en varias competencias locales y una nacional. Fue una experiencia increíble que me ayudó a crecer como skater. ¿Y tú, has competido alguna vez?']
#var mid_options = ['bien, gracias. y tú? gusto en verte.', 'Soy de Madrid, España. ¿Y tu de donde eres?', 'Me gustan leer libro, hacer deporte y tiempo con amigos. Y tú, ¿qué te gusta?', 'Sí, yo he visitar países como Francia y Italia, Japón. ¿Y tú, has viajar fuera tu país?', 'Mi favorito es Japón por cultura fascinante y naturaleza hermosa. Y tú, cuál destino te gusta más?', 'Ahora, intento aprender kickflip. Es truco difícil y necesita práctica. ¿Qué truco tú intentas?', 'Me gusta Nyjah Huston por técnica y estilo. Me inspira mucho. ¿Y tú, cuál skater te gusta?']
#var worst_options = ['bien, ¿y tú? gusto ver.', 'Yo ser de Madrid, España. Y tú de donde?', 'Me gustar leer libro, hacer deportes y pasar tiempo con amigo. ¿Y ti qué gusta hacer?', 'Sí, yo visitado países Francia, Italia, Japón. ¿Tú viajado otros países?', 'Mi favorito Japón por cultura y naturaleza. ¿Y tú, qué lugar más te gusta?', 'Yo patino cinco años ya. Empezar joven y me gusta mucho. ¿Y tú, cuánto tiempo patinas?', 'Patinar cinco año. Yo empezar joven, mucho gustar. ¿Tú cuánto tiempo patinar?', 'Quiero kickflip. Truco difícil, necesita mucho. ¿Tú qué truco querer?', 'Gusto Nyjah Huston por técnica, estilo. Inspira mucho. ¿Qué skater gustas tú?']
#var best_responses = [':) This response is grammatically correct and polite. It uses complete sentences and correct conjugations ("estoy" for "I am"). It also properly uses punctuation and includes a question ("¿Y tú?") to reciprocate the initial greeting, followed by a polite phrase ("Es un placer conocerte"), which translates to "It\'s a pleasure to meet you." This level of response is formal and shows attention to grammatical norms and social courtesy.', ':) This response is grammatically correct and complete. It provides detailed information ("Soy de Madrid, España") using the correct verb conjugation for "I am" ("soy") and specifies the city and country. The response includes a reciprocal question ("¿Y tú, de dónde eres?"), inviting the other person to share their origin. This level of response is formal, clear, and shows attention to grammatical norms and conversational etiquette.', ':) This response is grammatically correct. It uses reflexive verbs ("me gusta") appropriately, lists activities with the correct verb forms, and ends with a reciprocal question that is structured correctly. The use of commas to separate the list of activities and the inclusion of the conjunction "y" before the last item are in line with proper grammar rules in Spanish.', ':) This response is grammatically correct, using the present perfect tense appropriately ("he tenido la oportunidad") to indicate experiences. It also correctly lists countries with proper punctuation and uses the conjunction "y" before the last item. The follow-up question is structured correctly, inviting the other person to share their experiences with travel outside their country.', ':) This response is grammatically correct, using appropriate adjectives and prepositions to describe the reason for the preference. It includes a correct structure for expressing opinions ("Mi lugar favorito es...") and asks a reciprocal question with proper syntax.', ':) This response is grammatically correct, using the present perfect tense correctly ("Llevo patinando desde hace") to indicate a duration of time. It provides a specific timeframe, uses a past tense to add context ("Empecé"), and ends with a question that invites the other person to share their experience. The structure and verb tenses used are appropriate for the information being conveyed.', ':) This response is grammatically correct, using the present continuous tense appropriately ("estoy trabajando en aprender") to indicate an ongoing action. It correctly identifies the trick being learned and mentions the need for practice and precision, making the sentence informative and complete. The question at the end is also correctly structured, inviting the other person to share their current challenge.', ':) This response is grammatically correct, naming a favorite skater and providing reasons for the choice with appropriate use of prepositions and adjectives. It ends with a well-structured question, inviting the other person to share their inspirations.', ':) This response is grammatically correct, using the perfect tense to indicate past actions ("he participado") and providing details about the type of competitions. It reflects on the experience positively and invites the other person to share their own experiences with a well-formed question.']
#var mid_responses = [':| This response is mostly correct. In Spanish, we use an inverted \'¿\' at the beginning of a question. The lack of capitalization and the more casual phrase "gusto en verte" (pleasure in seeing you) instead of the more formal "Es un placer conocerte" (It\'s a pleasure to meet you) make it moderately correct.', ':| This response introduces minor grammatical errors by omitting the accent marks on "tú" and "dónde." In Spanish, accent marks are crucial for distinguishing between possessive adjectives, pronouns, and differentiating interrogative words from their relative or conjunctive counterparts. Omitting these can lead to a less formal tone and slight ambiguity, though the sentence remains largely understandable.', ':| This response introduces moderate grammatical errors that are more noticeable than minor punctuation issues. Firstly, the use of "gustan" with an infinitive verb ("leer") is incorrect because "gustar" should agree with the direct object of the sentence, which in this case is the singular activity of reading ("Me gusta leer"). Secondly, omitting "pasar" before "tiempo" disrupts the verb phrase, leaving the activity without a verb, which is a clear grammatical mistake. Lastly, dropping "a ti" in the follow-up question makes it less formal and slightly awkward, although it\'s still understandable.', ':| This response introduces more pronounced grammatical errors. Using "he visitar" instead of the correct "he visitado" shows a clear mistake in conjugating the verb in the present perfect tense, indicating a lack of understanding of how to use auxiliary verbs with past participles. Additionally, the awkward placement of the conjunction "y" before listing all the countries without a comma to separate them properly disrupts the list format. In the follow-up question, "has viajar" instead of "has viajado" repeats the mistake of misusing the infinitive form instead of the past participle. Omitting "de" before "tu país" also contributes to the errors, making the prepositional phrase incomplete.', ':| This response introduces errors by omitting articles ("la" before "cultura" and "la" before "naturaleza") and prepositions ("por su" should be used instead of "por") that are necessary for grammatical  correctness in Spanish. The question at the end is slightly informal due to the omission of "es tu" ("cuál es tu destino favorito?"), making it less grammatically correct but still understandable. These errors, while affecting the fluency and formality of the response, do not impede understanding.', ':| This response introduces more pronounced grammatical errors. The use of the present tense "Yo patino" instead of the present perfect "Llevo patinando" makes the timeframe unclear since it mixes present action with duration. The verb "empezar" is missing its conjugation and subject pronoun, making the sentence fragment incorrect. The question at the end, while understandable, simplifies the structure and makes it less formal by not using the present perfect tense, which would be more appropriate for expressing duration ("¿Y tú, hace cuánto que patinas?").', ':| This response introduces more pronounced grammatical errors by simplifying sentence structure and omitting certain articles and prepositions. "Intento aprender kickflip" misses the continuous aspect conveyed by "estoy intentando aprender," making it less precise. The description of the trick as "Es truco difícil" omits the article "un," which would be necessary for correct grammar. The question at the end, "¿Qué truco tú intentas?" lacks the verb "estar" to correctly form the present continuous tense in Spanish, making it grammatically incomplete.', ':| This response has more pronounced grammatical errors due to the omission of articles ("la" before "técnica" and "el" before "estilo") and simplifying the sentence structure. While the message is still understandable, it lacks the grammatical completeness and precision of the first response. The question at the end is grammatically simpler and omits the verb "tener" which would make it more correctly match the question in the first response.']
#var worst_responses = [':( This response shows a lower level of grammatical correctness primarily due to its brevity and omission of words, leading to a fragment ("gusto ver") that lacks a complete structure. While "bien, ¿y tú?" is still a correct and understandable way to say "good, and you?", the phrase "gusto ver" is an incomplete thought that translates directly to "pleasure see," missing the preposition and pronoun that would make it correct ("gusto de verte" or "gusto en verte"). This response is characteristic of very casual or colloquial speech, possibly in a text message or among close friends, and may not adhere to standard grammatical rules.\n', ':( This response contains significant grammatical errors. The use of "Yo ser" instead of "Soy" is incorrect because "ser" is an infinitive verb that needs to be conjugated to match the subject in Spanish sentences. Additionally, the omission of "eres" in the follow-up question ("Y tú de donde?") makes the question incomplete. Lastly, the absence of the accent in "dónde" and the punctuation mark "?" at the end of the question further contribute to the grammatical inaccuracies. This response demonstrates a misunderstanding of verb conjugation and sentence structure, which are essential for grammatical correctness in Spanish.', ':( This response has significant grammatical errors. Incorrectly using "gustar" instead of "gusta" shows a fundamental misunderstanding of verb conjugation. The singular use of "libro" and "amigo" when it should be plural to match the context of reading multiple books and spending time with multiple friends is incorrect. Omitting "a" before "ti" in the question and misusing "gusta" without a subject pronoun ("qué gusta hacer") are significant errors that make the sentence grammatically incorrect and awkward.', ':( This response contains significant grammatical errors, the omission of the auxiliary verb "he" before "visitado" disregards the proper formation of the present perfect tense in Spanish. The absence of "a" before the list of countries and the incorrect structure of the question ("¿Tú viajado otros países?") without auxiliary verbs or prepositions significantly affects the sentence\'s grammatical correctness. These mistakes demonstrate a  fundamental misunderstanding of verb tenses and sentence structuring in Spanish, affecting clarity and correctness.', ':( This response contains significant grammatical errors by omitting the verb "es" ("Mi favorito es Japón") and not using prepositions or articles where needed, leading to a choppy and incomplete sentence structure. The question is rephrased awkwardly, lacking clarity and grammatical structure ("¿Y tú, cuál es tu lugar favorito?"), and it uses an incorrect order of words that doesn\'t fit standard question formatting in Spanish. These errors indicate a misunderstanding of basic sentence structure and the importance of verb inclusion for clarity.', ':( This response has significant grammatical errors, including omitting the verb "llevar" that should accompany time expressions, not using the correct tense or conjugation for "empezar" ("yo empezar" instead of "empecé"), and a lack of coherence in the sentence structure. The final question is grammatically incorrect, missing auxiliary verbs, prepositions, and proper conjugation, which significantly affects clarity and grammatical correctness.', ':( This response has significant grammatical errors, including a very basic expression of intent ("Quiero kickflip") that omits necessary verbs for clarity and grammatical correctness ("estoy intentando aprender el"). The description of the trick as "Truco difícil, necesita mucho" is fragmented and lacks coherence without specifying what is needed ("práctica," "esfuerzo," etc.). The question at the end, "¿Tú qué truco querer?" is grammatically incorrect due to the lack of auxiliary verbs and proper conjugation, significantly affecting the sentence\'s clarity and correctness.', ':( This response contains significant grammatical errors. It incorrectly uses "Gusto" instead of "Me gusta" to express personal preference, omitting necessary reflexive pronouns. The omission of prepositions and articles makes the sentence choppy and less clear. The question at the end, "¿Qué skater gustas tú?" misuses the verb "gustar," which is not appropriately conjugated or structured for the intended meaning, showing a fundamental misunderstanding of how to express likes or preferences in Spanish.']

var names = ['Skater Boy John', 'Skater Boy Khyle', 'Skater Boy Max', 'Skater Boy Conan', 'Skater Boy Joseph', 'Skater Boy Shaun', 'Skater Boy Dylan', 'Skater Boy Max', 'Skater Boy Álvaro']
var questions = ['Hola, ¿cómo estás?', '¿De dónde eres?', '¿Qué te gusta hacer en tu tiempo libre?', '¿Has viajado a otros países?', '¿Cuál es tu lugar favorito al que has viajado?', '¿Cuánto tiempo llevas patinando?', '¿Qué truco estás intentando aprender?', '¿Quién es tu skater favorito?', '¿Has participado en alguna competencia de skate?']
var best_options = ['Muy bien, gracias. ¿Y tú? Es un placer conocerte.', 'Soy de Madrid, España. ¿Y tú, de dónde eres?', 'Me gusta leer libros, hacer deporte y pasar tiempo con amigos. ¿Y a ti, qué te gusta hacer?', 'Sí, he tenido la oportunidad de visitar varios países, como Francia, Italia y Japón. ¿Y tú, has viajado fuera de tu país?', 'Mi lugar favorito es Japón por su cultura fascinante y su hermosa naturaleza. ¿Y tú, cuál es tu destino favorito?', 'Llevo patinando desde hace cinco años. Empecé cuando era más joven y me ha apasionado desde entonces. ¿Y tú, hace cuánto que patinas?', 'Actualmente, estoy trabajando en aprender el kickflip. Es un truco que requiere mucha práctica y precisión. ¿Y tú, qué truco estás intentando dominar?', 'Mi skater favorito es Nyjah Huston por su increíble técnica y estilo. Siempre me inspira a mejorar. ¿Y tú, tienes algún skater que admires?', 'Sí, he participado en varias competencias locales y una nacional. Fue una experiencia increíble que me ayudó a crecer como skater. ¿Y tú, has competido alguna vez?']
var mid_options = ['bien, gracias. y tú? gusto en verte.', 'Soy de Madrid, España. ¿Y tu de donde eres?', 'Me gustan leer libro, hacer deporte y tiempo con amigos. Y tú, ¿qué te gusta?', 'Sí, yo he visitar países como Francia y Italia, Japón. ¿Y tú, has viajar fuera tu país?', 'Mi favorito es Japón por cultura fascinante y naturaleza hermosa. Y tú, cuál destino te gusta más?', 'Yo patino cinco años ya. Empezar joven y me gusta mucho. ¿Y tú, cuánto tiempo patinas?', 'Ahora, intento aprender kickflip. Es truco difícil y necesita práctica. ¿Qué truco tú intentas?', 'Me gusta Nyjah Huston por técnica y estilo. Me inspira mucho. ¿Y tú, cuál skater te gusta?', 'Sí, participé en competencias locales y una nacional. Muy buena experiencia para crecer. ¿Tú has competido?']
var worst_options =  ['bien, ¿y tú? gusto ver.', 'Yo ser de Madrid, España. Y tú de donde?', 'Me gustar leer libro, hacer deportes y pasar tiempo con amigo. ¿Y ti qué gusta hacer?', 'Sí, yo visitado países Francia, Italia, Japón. ¿Tú viajado otros países?', 'Mi favorito Japón por cultura y naturaleza. ¿Y tú, qué lugar más te gusta?', 'Patinar cinco año. Yo empezar joven, mucho gustar. ¿Tú cuánto tiempo patinar?', 'Quiero kickflip. Truco difícil, necesita mucho. ¿Tú qué truco querer?', 'Gusto Nyjah Huston por técnica, estilo. Inspira mucho. ¿Qué skater gustas tú?', 'Si, yo competir en local y nacional. Bueno experiencia para crecer. ¿Competido tú?']
var best_responses = [':) This response is grammatically correct and polite. It uses complete sentences and correct conjugations ("estoy" for "I am"). It also properly uses punctuation and includes a question ("¿Y tú?") to reciprocate the initial greeting, followed by a polite phrase ("Es un placer conocerte"), which translates to "It\'s a pleasure to meet you." This level of response is formal and shows attention to grammatical norms and social courtesy.', ':) This response is grammatically correct and complete. It provides detailed information ("Soy de Madrid, España") using the correct verb conjugation for "I am" ("soy") and specifies the city and country. The response includes a reciprocal question ("¿Y tú, de dónde eres?"), inviting the other person to share their origin. This level of response is formal, clear, and shows attention to grammatical norms and conversational etiquette.', ':) This response is grammatically correct. It uses reflexive verbs ("me gusta") appropriately, lists activities with the correct verb forms, and ends with a reciprocal question that is structured correctly. The use of commas to separate the list of activities and the inclusion of the conjunction "y" before the last item are in line with proper grammar rules in Spanish.', ':) This response is grammatically correct, using the present perfect tense appropriately ("he tenido la oportunidad") to indicate experiences. It also correctly lists countries with proper punctuation and uses the conjunction "y" before the last item. The follow-up question is structured correctly, inviting the other person to share their experiences with travel outside their country.', ':) This response is grammatically correct, using appropriate adjectives and prepositions to describe the reason for the preference. It includes a correct structure for expressing opinions ("Mi lugar favorito es...") and asks a reciprocal question with proper syntax.', ':) This response is grammatically correct, using the present perfect tense correctly ("Llevo patinando desde hace") to indicate a duration of time. It provides a specific timeframe, uses a past tense to add context ("Empecé"), and ends with a question that invites the other person to share their experience. The structure and verb tenses used are appropriate for the information being conveyed.', ':) This response is grammatically correct, using the present continuous tense appropriately ("estoy trabajando en aprender") to indicate an ongoing action. It correctly identifies the trick being learned and mentions the need for practice and precision, making the sentence informative and complete. The question at the end is also correctly structured, inviting the other person to share their current challenge.', ':) This response is grammatically correct, naming a favorite skater and providing reasons for the choice with appropriate use of prepositions and adjectives. It ends with a well-structured question, inviting the other person to share their inspirations.', ':) This response is grammatically correct, using the perfect tense to indicate past actions ("he participado") and providing details about the type of competitions. It reflects on the experience positively and invites the other person to share their own experiences with a well-formed question.']
var mid_responses = [':| This response is mostly correct. In Spanish, we use an inverted \'¿\' at the beginning of a question. The lack of capitalization and the more casual phrase "gusto en verte" (pleasure in seeing you) instead of the more formal "Es un placer conocerte" (It\'s a pleasure to meet you) make it moderately correct.', ':| This response introduces minor grammatical errors by omitting the accent marks on "tú" and "dónde." In Spanish, accent marks are crucial for distinguishing between possessive adjectives, pronouns, and differentiating interrogative words from their relative or conjunctive counterparts. Omitting these can lead to a less formal tone and slight ambiguity, though the sentence remains largely understandable.', ':| This response introduces moderate grammatical errors that are more noticeable than minor punctuation issues. Firstly, the use of "gustan" with an infinitive verb ("leer") is incorrect because "gustar" should agree with the direct object of the sentence, which in this case is the singular activity of reading ("Me gusta leer"). Secondly, omitting "pasar" before "tiempo" disrupts the verb phrase, leaving the activity without a verb, which is a clear grammatical mistake. Lastly, dropping "a ti" in the follow-up question makes it less formal and slightly awkward, although it\'s still understandable.', ':| This response introduces more pronounced grammatical errors. Using "he visitar" instead of the correct "he visitado" shows a clear mistake in conjugating the verb in the present perfect tense, indicating a lack of understanding of how to use auxiliary verbs with past participles. Additionally, the awkward placement of the conjunction "y" before listing all the countries without a comma to separate them properly disrupts the list format. In the follow-up question, "has viajar" instead of "has viajado" repeats the mistake of misusing the infinitive form instead of the past participle. Omitting "de" before "tu país" also contributes to the errors, making the prepositional phrase incomplete.', ':| This response introduces errors by omitting articles ("la" before "cultura" and "la" before "naturaleza") and prepositions ("por su" should be used instead of "por") that are necessary for grammatical  correctness in Spanish. The question at the end is slightly informal due to the omission of "es tu" ("cuál es tu destino favorito?"), making it less grammatically correct but still understandable. These errors, while affecting the fluency and formality of the response, do not impede understanding.', ':| This response introduces more pronounced grammatical errors. The use of the present tense "Yo patino" instead of the present perfect "Llevo patinando" makes the timeframe unclear since it mixes present action with duration. The verb "empezar" is missing its conjugation and subject pronoun, making the sentence fragment incorrect. The question at the end, while understandable, simplifies the structure and makes it less formal by not using the present perfect tense, which would be more appropriate for expressing duration ("¿Y tú, hace cuánto que patinas?").', ':| This response introduces more pronounced grammatical errors by simplifying sentence structure and omitting certain articles and prepositions. "Intento aprender kickflip" misses the continuous aspect conveyed by "estoy intentando aprender," making it less precise. The description of the trick as "Es truco difícil" omits the article "un," which would be necessary for correct grammar. The question at the end, "¿Qué truco tú intentas?" lacks the verb "estar" to correctly form the present continuous tense in Spanish, making it grammatically incomplete.', ':| This response has more pronounced grammatical errors due to the omission of articles ("la" before "técnica" and "el" before "estilo") and simplifying the sentence structure. While the message is still understandable, it lacks the grammatical completeness and precision of the first response. The question at the end is grammatically simpler and omits the verb "tener" which would make it more correctly match the question in the first response.', ':| This response introduces more pronounced grammatical errors by simplifying the sentence structure and omitting details that would make the sentences more complete ("participé" without specifying the time frame as clearly as "he participado" does). The reflections on the experience are condensed, and the question at the end, while still understandable, lacks the polish and detail of the first response, making it less grammatically sophisticated.']
var worst_responses = [':( This response shows a lower level of grammatical correctness primarily due to its brevity and omission of words, leading to a fragment ("gusto ver") that lacks a complete structure. While "bien, ¿y tú?" is still a correct and understandable way to say "good, and you?", the phrase "gusto ver" is an incomplete thought that translates directly to "pleasure see," missing the preposition and pronoun that would make it correct ("gusto de verte" or "gusto en verte"). This response is characteristic of very casual or colloquial speech, possibly in a text message or among close friends, and may not adhere to standard grammatical rules.\n', ':( This response contains significant grammatical errors. The use of "Yo ser" instead of "Soy" is incorrect because "ser" is an infinitive verb that needs to be conjugated to match the subject in Spanish sentences. Additionally, the omission of "eres" in the follow-up question ("Y tú de donde?") makes the question incomplete. Lastly, the absence of the accent in "dónde" and the punctuation mark "?" at the end of the question further contribute to the grammatical inaccuracies. This response demonstrates a misunderstanding of verb conjugation and sentence structure, which are essential for grammatical correctness in Spanish.', ':( This response has significant grammatical errors. Incorrectly using "gustar" instead of "gusta" shows a fundamental misunderstanding of verb conjugation. The singular use of "libro" and "amigo" when it should be plural to match the context of reading multiple books and spending time with multiple friends is incorrect. Omitting "a" before "ti" in the question and misusing "gusta" without a subject pronoun ("qué gusta hacer") are significant errors that make the sentence grammatically incorrect and awkward.', ':( This response contains significant grammatical errors, the omission of the auxiliary verb "he" before "visitado" disregards the proper formation of the present perfect tense in Spanish. The absence of "a" before the list of countries and the incorrect structure of the question ("¿Tú viajado otros países?") without auxiliary verbs or prepositions significantly affects the sentence\'s grammatical correctness. These mistakes demonstrate a  fundamental misunderstanding of verb tenses and sentence structuring in Spanish, affecting clarity and correctness.', ':( This response contains significant grammatical errors by omitting the verb "es" ("Mi favorito es Japón") and not using prepositions or articles where needed, leading to a choppy and incomplete sentence structure. The question is rephrased awkwardly, lacking clarity and grammatical structure ("¿Y tú, cuál es tu lugar favorito?"), and it uses an incorrect order of words that doesn\'t fit standard question formatting in Spanish. These errors indicate a misunderstanding of basic sentence structure and the importance of verb inclusion for clarity.', ':( This response has significant grammatical errors, including omitting the verb "llevar" that should accompany time expressions, not using the correct tense or conjugation for "empezar" ("yo empezar" instead of "empecé"), and a lack of coherence in the sentence structure. The final question is grammatically incorrect, missing auxiliary verbs, prepositions, and proper conjugation, which significantly affects clarity and grammatical correctness.', ':( This response has significant grammatical errors, including a very basic expression of intent ("Quiero kickflip") that omits necessary verbs for clarity and grammatical correctness ("estoy intentando aprender el"). The description of the trick as "Truco difícil, necesita mucho" is fragmented and lacks coherence without specifying what is needed ("práctica," "esfuerzo," etc.). The question at the end, "¿Tú qué truco querer?" is grammatically incorrect due to the lack of auxiliary verbs and proper conjugation, significantly affecting the sentence\'s clarity and correctness.', ':( This response contains significant grammatical errors. It incorrectly uses "Gusto" instead of "Me gusta" to express personal preference, omitting necessary reflexive pronouns. The omission of prepositions and articles makes the sentence choppy and less clear. The question at the end, "¿Qué skater gustas tú?" misuses the verb "gustar," which is not appropriately conjugated or structured for the intended meaning, showing a fundamental misunderstanding of how to express likes or preferences in Spanish.', ':( This response has significant grammatical errors, notably in the misuse of verb tenses ("yo competir" instead of "he competido" or "participé") and the omission of articles and prepositions ("en local y nacional" without "competencias"). The description of the experience ("Bueno experiencia para crecer") is grammatically incorrect due to the adjective-noun agreement error and missing articles. The question at the end ("¿Competido tú?") lacks the auxiliary verb and correct structure, demonstrating a fundamental misunderstanding of Spanish verb conjugation and question formatting.']

signal button_chosen()
signal best_chosen()
signal mid_chosen()
signal worst_chosen()

var chosen = 0

func _ready():
	visible = false

	
# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
	
func format_text(string):
	var word_list = string.split(" ")
	var res = ""
	var count = 0
	for word in word_list:
		res += word + " "
		if count == 5:
			res += '\n'
			count = 0
		count += 1
	return res
signal dialogue_finished()
func start_dialogue(dialogue_number):
	dialogue_number = randi() % 9
	var buttons = [button, button_2, button_3]
	for i in range(3):
		buttons[i].text = ""
	
	
	visible = true
	chosen = 0
	
	var char_name = names[dialogue_number]
	var question = questions[dialogue_number]
	var best_option = format_text(best_options[dialogue_number])
	var mid_option = format_text(mid_options[dialogue_number])
	var worst_option = format_text(worst_options[dialogue_number])
	var best_response = (best_responses[dialogue_number])
	var mid_response = (mid_responses[dialogue_number])
	var worst_response = (worst_responses[dialogue_number])
	
	

	dialogue_name.clear()
	dialogue_name.append_text(char_name)
	
	
	var res = ""
	for c in question:
		text.clear()
		res += c
		text.append_text(res)
		await get_tree().create_timer(0.03).timeout
	
	
	var options = [best_option, mid_option, worst_option]
	var options_string = ["Best", "Mid", "Worst"]
	
	
	
	var random_order = [0,1,2]
	random_order.shuffle()
	
	var j = 0
	for i in random_order:
		buttons[j].text = options[i]
		j += 1
	
	await button_chosen
	
	if chosen == 0:
		return
	
	var response = ""
	var chosen_option = options_string[random_order[chosen-1]]
	if chosen_option == "Best":
		response = best_response
		best_chosen.emit()
	elif chosen_option == "Mid":
		response = worst_response
		mid_chosen.emit()
	elif chosen_option == "Worst":
		response = mid_response
		worst_chosen.emit()
		
	text.clear()
	for c in response:
		print(c)
		text.append_text(c)
		await get_tree().create_timer(0.001).timeout
	
	dialogue_finished.emit()
	

	
	
	
	
	
	
		

	
func close_dialogue():
	visible = false

func _input(event):
	if event.is_action_pressed("back"):
		close_dialogue()
	if event.is_action_pressed("1"):
		chosen = 1
		button_chosen.emit(1)
	if event.is_action_pressed("2"):
		chosen = 2
		button_chosen.emit(2)
	if event.is_action_pressed("3"):
		chosen = 3
		button_chosen.emit(3)



func _on_npc_not_ready_for_chat():
	close_dialogue()
	button_chosen.emit(0)
